<p><%= @article.title %></p>
<p><%= @article.content %></p>

<% if author_or_not?(@article) %>
  <%= link_to '編集', edit_article_path %>
  <%= link_to '削除', @article, method: :delete %>
<% end %>

<div class="comment">
  <h4>コメント一覧</h4> 

  <table>
    <% @comments.each do |comment| %>
      <tr>
        <td><%= comment.content %></td>

        <% if author_or_not?(comment) %>
          <td><%= comment.user.first_name %></td>
        <% else %>
          <td><%= link_to comment.user.first_name, user_path(comment.user_id) %></td>
        <% end %>

        <td><%= comment.created_at %></td>

        <% if author_or_not?(comment) %>
          <td><%= link_to '削除', article_comment_path(@article, comment), method: :delete %></td>
        <% end %>
      </tr>
    <% end %>
  </table>
</div>

<% if current_user %>
  <h4>コメント</h4>
  <%= form_with model: [@article, @comment], local: true do |f| %>
    <%= render 'layouts/error_messages', model: f.object %>
    <div class="form-group">
      <%= f.label :content %>
      <%= f.text_area :content %>
    </div>
    <%= f.submit 'コメント投稿' %>
  <% end %>
<% end %>
