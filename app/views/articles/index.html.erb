<h1>技術記事たち</h1>

<%= button_to "全記事表示", articles_path, method: :get %>
<%= button_to t('enums.article.category.mind')+"記事のみ表示", { controller: :articles, action: :search }, params: { category: 'mind' }, method: :get %>
<%= button_to t('enums.article.category.technic')+"記事のみ表示", { controller: :articles, action: :search }, params: { category: 'technic' }, method: :get %>
<%= button_to t('enums.article.category.physical')+"記事のみ表示", { controller: :articles, action: :search }, params: { category: 'physical' }, method: :get %>
<%= button_to t('enums.article.category.strategy')+"記事のみ表示", { controller: :articles, action: :search }, params: { category: 'strategy' }, method: :get %>
<%= button_to t('enums.article.category.theory')+"記事のみ表示", { controller: :articles, action: :search }, params: { category: 'theory' }, method: :get %>

<table>
  <tr>
    <th><%= t('article.title') %> </th>
    <th><%= t('user.first_name') %></th>
    <th><%= t('article.content') %></th>
    <th><%= t('article.category') %></th>
  </tr>

  <% @articles.each do |article|%>
    <tr>
      <td><%= article.title.truncate(20) %></td>

      <% if current_user && current_user.author_or_not?(article) %>
        <td><%= article.user.first_name %></td>
      <% else %>
        <td><%= link_to article.user.first_name, user_path(article.user_id) %></td>
      <% end %>

      <td><%= article.content.truncate(30) %></td>
      <td><%= article.category %></td>
      <td><%= link_to '詳細', article %></td>
      
      <% if current_user && current_user.author_or_not?(article) %>
        <td><%= link_to '編集', edit_article_path(article) %></td>
        <td><%= link_to '削除', article, method: :delete %></td>
      <% end %>
    </tr>
  <% end %>
</table>

 <%= paginate @articles %>
